# Architectural Smells (Ground Truth)

| Smell | Primary Service / Module | Code File Path (if applicable) | Code Line(s) | Labeling justification in details |
| --- | --- | --- | --- | --- |
| Greedy Service | order-service | `services/order/src/main/java/com/elsebaey/ecommerce/order/OrderService.java` | L32-L69 | `OrderService.createOrder` coordinates customer lookup, product reservation, order persistence, order-line creation, payment initiation, and confirmation publishing instead of delegating those concerns to distinct domain services. |
| Unstable Dependency | order-service | `services/order/src/main/java/com/elsebaey/ecommerce/order/OrderService.java`; `services/order/src/main/java/com/elsebaey/ecommerce/customer/CustomerClient.java`; `services/order/src/main/java/com/elsebaey/ecommerce/product/ProductClient.java`; `services/order/src/main/java/com/elsebaey/ecommerce/payment/PaymentClient.java` | OrderService:L23-L58; CustomerClient:L9-L16; ProductClient:L19-L45; PaymentClient:L7-L14 | Order creation issues synchronous Feign and RestTemplate calls to customer, product, and payment services with no resilience (no retries, circuit breakers, or fallbacks), so any downstream instability directly breaks the workflow. |
| Hub-like Services | order-service | `services/order/src/main/java/com/elsebaey/ecommerce/order/OrderService.java`; `services/order/src/main/java/com/elsebaey/ecommerce/kafka/OrderProducer.java`; `services/order/src/main/java/com/elsebaey/ecommerce/product/ProductClient.java`; `services/order/src/main/java/com/elsebaey/ecommerce/payment/PaymentClient.java`; `services/order/src/main/java/com/elsebaey/ecommerce/customer/CustomerClient.java` | OrderService:L23-L68; OrderProducer:L11-L25; ProductClient:L19-L45; PaymentClient:L7-L14; CustomerClient:L9-L16 | The order service operates as a hub, brokering interactions among customer validation, product availability, payment processing, and Kafka notifications, which concentrates many inter-service connections into one component. |
| Broken Modularization | payment-service | `services/payment/src/main/java/com/elsebaey/ecommerce/payment/PaymentService.java`; `services/payment/src/main/java/com/elsebaey/ecommerce/notification/NotificationProducer.java`; `services/payment/src/main/java/com/elsebaey/ecommerce/notification/PaymentNotificationRequest.java`; `services/notification/src/main/java/com/elsebaey/ecommerce/kafka/NotificationConsumer.java` | PaymentService:L3-L27; NotificationProducer:L1-L26; PaymentNotificationRequest:L1-L14; NotificationConsumer:L1-L64 | Payment service embeds notification-domain producers and DTOs under the `com.elsebaey.ecommerce.notification` namespace even though a dedicated notification service already owns that logic, fragmenting the notification module across services. |

